import{u as f,j as t,d as o,r,g as N,L as z}from"./index-BT-hbmM7.js";import{S as C,a as I,b as T}from"./styles-Csco3nRf.js";import{S as H,a as R,b as L,T as F,R as B,M as $,f as E,c as A,g as O}from"./styles-CJf2DpUM.js";import{T as D,W as P}from"./WatchListButton-fPPBrXgW.js";import{M as y,f as W,a as G}from"./omdbApi-IrEd4jV7.js";const Y=()=>{const{activeTag:e,setActiveTag:a}=f();return t.jsx(H,{children:D.map(i=>t.jsx(R,{$active:e===i.key,onClick:()=>a(i.key),children:i.label},i.key))})},V=o.div.withConfig({displayName:"styles__StyledSelectedOttsDisplay",componentId:"sc-1ligwg1-0"})(["display:flex;align-items:center;gap:",";margin-bottom:",";.label{font-size:18px;font-weight:500;color:",";min-width:80px;}.otts-list{display:flex;gap:",";align-items:center;flex-wrap:wrap;}.ott-item{width:58px;height:58px;border-radius:8px;object-fit:cover;border:1px solid ",";transition:all 0.2s ease;cursor:default;&:hover{border-color:",";transform:scale(1.1);box-shadow:0 4px 12px rgba(255,133,0,0.3);}}.no-selection{color:",";font-size:16px;}@media (max-width:","){flex-direction:column;align-items:flex-start;gap:",";.label{min-width:auto;}.ott-item{width:48px;height:48px;}}"],({theme:e})=>e.spacing.md,({theme:e})=>e.spacing.md,({theme:e})=>e.colors.text,({theme:e})=>e.spacing.sm,({theme:e})=>e.colors.border,({theme:e})=>e.colors.primary,({theme:e})=>e.colors.textMuted,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.sm),q=()=>{const{selectedOtts:e}=f(),[a,i]=r.useState([]),[n,s]=r.useState(!0),[c,p]=r.useState(null);if(r.useEffect(()=>{(async()=>{try{const h=await N();i(h||[])}catch(h){console.error("Error fetching all watch providers:",h),p("OTT 제공사 정보를 불러오는 데 실패했습니다.")}finally{s(!1)}})()},[]),n)return null;if(c)return t.jsx("p",{style:{color:"red"},children:c});const d=a.filter(l=>e.includes(l.provider_id));return t.jsxs(V,{children:[t.jsx("div",{className:"label",children:"선택된 서비스 :"}),t.jsx("div",{className:"otts-list",children:d.length===0?t.jsx("span",{className:"no-selection",children:"선택된 서비스가 없습니다"}):d.map(l=>t.jsx("img",{className:"ott-item",src:`https://image.tmdb.org/t/p/original${l.logo_path}`,alt:l.provider_name,title:l.provider_name},l.provider_id))})]})},J=({movies:e,title:a})=>{const i=e.slice(0,5);return t.jsxs(L,{children:[t.jsx("h2",{children:a}),t.jsx(F,{children:i.map((n,s)=>t.jsx(B,{movie:n,rank:s+1},n.id))})]})},K=o.section.withConfig({displayName:"styles__StyledHybridSection",componentId:"sc-isuaei-0"})(["margin-bottom:",";@media (max-width:","){margin-bottom:",";}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.lg),Q=o.div.withConfig({displayName:"styles__SectionHeader",componentId:"sc-isuaei-1"})(["margin-bottom:",";h3{font-size:28px;font-weight:600;color:",";margin:0;padding:0 12px 0 18px;position:relative;background:linear-gradient( 90deg,rgba(150,150,150,0.1) 5%,rgba(255,255,255,0) 20%,transparent 100% );mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);-webkit-mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);}@media (max-width:","){margin-bottom:",";h3{font-size:24px;padding-left:12px;}}@media (max-width:","){h3{font-size:22px;padding-left:10px;}}"],({theme:e})=>e.spacing.lg,({theme:e})=>e.colors.text,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.mobile),U=o.div.withConfig({displayName:"styles__FixedGrid",componentId:"sc-isuaei-2"})(["display:grid;grid-template-columns:repeat(5,1fr);gap:",";margin-bottom:",";.grid-item{width:100%;}@media (max-width:","){gap:",";margin-bottom:",";}@media (max-width:","){grid-template-columns:repeat(3,1fr);gap:",";.grid-item:nth-child(4){grid-column:1;}.grid-item:nth-child(5){grid-column:3;}}@media (max-width:","){grid-template-columns:repeat(2,1fr);.grid-item:nth-child(4){grid-column:auto;}.grid-item:nth-child(5){grid-column:1 / -1;justify-self:center;max-width:150px;}}"],({theme:e})=>e.spacing.lg,({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.desktop,({theme:e})=>e.spacing.md,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.sm,({theme:e})=>e.breakpoints.mobile),X=o.div.withConfig({displayName:"styles__CarouselWrapper",componentId:"sc-isuaei-3"})(["margin-top:",";overflow:hidden;h3{display:none;}> div > div:first-child{width:calc( 180px * 7 + 16px * 6 + 20px );margin:0 auto;padding:10px;overflow:hidden;@media (max-width:","){width:calc(155px * 7 + 16px * 6 + 20px);}@media (max-width:","){width:calc(130px * 5 + 16px * 4 + 20px);}}"],({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.breakpoints.mobile),m=({movies:e,title:a})=>{if(e.length===0)return null;const i=e.slice(0,5),n=e.slice(5,26);return t.jsxs(K,{children:[t.jsx(Q,{children:t.jsx("h3",{children:a})}),t.jsx(U,{children:i.map(s=>t.jsx("div",{className:"grid-item",children:t.jsx($,{movie:s})},s.id))}),n.length>0&&t.jsx(X,{children:t.jsx(y,{movies:n,title:`${a} 더보기`})})]})},Z=o.section.withConfig({displayName:"styles__StyledHeroBanner",componentId:"sc-xjk6pi-0"})(["position:relative;height:60vh;min-height:400px;max-height:600px;width:100%;overflow:hidden;margin-bottom:",";border-radius:12px;@media (max-width:","){height:50vh;min-height:300px;margin-bottom:",";}@media (max-width:","){height:40vh;min-height:250px;border-radius:8px;}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.mobile),ee=o.div.withConfig({displayName:"styles__HeroBackground",componentId:"sc-xjk6pi-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;"]),te=o.div.withConfig({displayName:"styles__HeroContent",componentId:"sc-xjk6pi-2"})(["position:relative;z-index:10;height:100%;display:flex;align-items:center;padding:0 ",";&::before{content:'';position:absolute;top:0;left:0;width:60%;height:100%;background:linear-gradient( to right,rgba(0,0,0,0.7) 0%,rgba(0,0,0,0.4) 50%,rgba(0,0,0,0.1) 80%,transparent 100% );pointer-events:none;z-index:-1;}@media (max-width:","){padding:0 ",";&::before{width:100%;background:linear-gradient( to bottom,transparent 0%,rgba(0,0,0,0.3) 50%,rgba(0,0,0,0.7) 100% );}}@media (max-width:","){padding:0 ",";}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.md),ie=o.div.withConfig({displayName:"styles__HeroInfo",componentId:"sc-xjk6pi-3"})(["max-width:50%;position:relative;@media (max-width:","){max-width:70%;}@media (max-width:","){max-width:100%;}"],({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.breakpoints.mobile),ae=o.h1.withConfig({displayName:"styles__HeroTitle",componentId:"sc-xjk6pi-4"})(["font-size:3.8rem;font-weight:800;background:linear-gradient(to right,#fff9eb 0%,#fcda54 90%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;color:transparent;margin-bottom:",";line-height:1.1;letter-spacing:-0.02em;filter:drop-shadow(0 3px 8px rgba(254,203,55,0.5));@media (max-width:","){font-size:3.2rem;}@media (max-width:","){font-size:2.8rem;margin-bottom:",";}@media (max-width:","){font-size:2.2rem;}"],({theme:e})=>e.spacing.sm,({theme:e})=>e.breakpoints.desktop,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.xs,({theme:e})=>e.breakpoints.mobile),se=o.p.withConfig({displayName:"styles__HeroOverview",componentId:"sc-xjk6pi-5"})(["font-size:1.1rem;line-height:1.5;color:",";margin-bottom:",";text-shadow:1px 1px 2px rgba(0,0,0,0.8);opacity:0.9;@media (max-width:","){font-size:1rem;margin-bottom:",";}@media (max-width:","){font-size:0.9rem;line-height:1.4;}"],({theme:e})=>e.colors.text,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.mobile),re=o.div.withConfig({displayName:"styles__HeroActions",componentId:"sc-xjk6pi-6"})(["display:flex;align-items:center;gap:",";@media (max-width:","){gap:",";}"],({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.sm),oe=o.div.withConfig({displayName:"styles__HeroMetrics",componentId:"sc-xjk6pi-7"})(["display:flex;align-items:center;gap:8px;margin-bottom:",";.release-year{font-size:1.1rem;font-weight:600;color:rgba(255,255,255,0.8);text-shadow:0 1px 3px rgba(0,0,0,0.7);}@media (max-width:","){gap:6px;margin-bottom:",";.release-year{font-size:1rem;}}"],({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.sm),w=o.div.withConfig({displayName:"styles__HeroRating",componentId:"sc-xjk6pi-8"})(["display:flex;align-items:center;gap:6px;background:linear-gradient( 135deg,rgba(255,133,0,0.15) 0%,rgba(255,183,0,0.1) 50%,rgba(255,133,0,0.05) 100% );backdrop-filter:blur(10px);border:1px solid rgba(255,133,0,0.3);border-radius:8px;padding:6px 10px;box-shadow:0 4px 12px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.1);.imdb-label{font-size:0.65rem;font-weight:700;color:#f5c518;text-transform:uppercase;letter-spacing:0.5px;text-shadow:0 1px 2px rgba(0,0,0,0.8);}.rating-score{font-size:0.9rem;font-weight:700;color:#ffffff;text-shadow:0 1px 3px rgba(0,0,0,0.9);}&.rotten-tomatoes{background:linear-gradient( 135deg,rgba(255,60,60,0.15) 0%,rgba(255,80,80,0.1) 50%,rgba(255,60,60,0.05) 100% );border:1px solid rgba(255,60,60,0.3);.rt-label{font-size:0.8rem;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.8));}.rt-score{font-size:0.9rem;font-weight:700;color:#ffffff;text-shadow:0 1px 3px rgba(0,0,0,0.9);}}@media (max-width:","){padding:4px 8px;gap:4px;.imdb-label{font-size:0.6rem;}.rating-score,.rt-score{font-size:0.8rem;}&.rotten-tomatoes .rt-label{font-size:0.7rem;}}"],({theme:e})=>e.breakpoints.mobile),ne=o.button.withConfig({displayName:"styles__PlayButton",componentId:"sc-xjk6pi-9"})(["display:flex;align-items:center;gap:",";padding:",';background:linear-gradient(135deg,#ffffff 0%,#f8f8f8 50%,#e8e8e8 100%);color:#1a1a1a;border:none;border-radius:8px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all 0.3s ease;position:relative;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.8);&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.4),transparent );transition:left 0.5s ease;}&:hover{background:linear-gradient(135deg,#f0f0f0 0%,#e8e8e8 50%,#d8d8d8 100%);transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.9);&::before{left:100%;}}&:active{transform:translateY(-1px) scale(1.01);}@media (max-width:',"){padding:",";font-size:1rem;}"],({theme:e})=>e.spacing.sm,({theme:e})=>`${e.spacing.md} ${e.spacing.lg}`,({theme:e})=>e.breakpoints.mobile,({theme:e})=>`${e.spacing.sm} ${e.spacing.md}`),le=({movie:e})=>{var c;const[a,i]=r.useState(!1),[n,s]=r.useState({imdbRating:null,rottenTomatoesRating:null});return r.useEffect(()=>{const p=new Image;p.onload=()=>i(!0),p.src=`https://image.tmdb.org/t/p/original${e.backdrop_path}`},[e.backdrop_path]),r.useEffect(()=>{(async()=>{try{const d=await W(e.id);if(d){const l=await G(d);l&&s({imdbRating:l.imdbRating,rottenTomatoesRating:l.rottenTomatoesRating})}}catch(d){console.error("Error fetching ratings:",d)}})()},[e.id]),t.jsxs(Z,{children:[t.jsx(ee,{style:{backgroundImage:a?`url(https://image.tmdb.org/t/p/original${e.backdrop_path})`:"none"}}),t.jsx(te,{children:t.jsxs(ie,{children:[t.jsx(ae,{children:e.title||e.name}),t.jsxs(oe,{children:[t.jsxs(w,{children:[t.jsx("span",{className:"imdb-label",children:"IMDB"}),t.jsx("span",{className:"rating-score",children:n.imdbRating||((c=e.vote_average)==null?void 0:c.toFixed(1))||"8.2"})]}),t.jsxs(w,{className:"rotten-tomatoes",children:[t.jsx("span",{className:"rt-label",children:"🍅"}),t.jsx("span",{className:"rt-score",children:n.rottenTomatoesRating||`${Math.round((e.vote_average||8.2)*8.5)}%`})]}),t.jsx("span",{className:"release-year",children:e.release_date?new Date(e.release_date).getFullYear():"2024"})]}),t.jsx(se,{children:e.overview?e.overview.length>180?`${e.overview.substring(0,180)}...`:e.overview:"줄거리 정보가 없습니다."}),t.jsxs(re,{children:[t.jsx(z,{to:`/detail/${e.id}?type=${e.media_type||(e.name&&!e.title?"tv":"movie")}`,children:t.jsx(ne,{children:"상세보기"})}),t.jsx(P,{movieId:e.id})]})]})})]})},b={new:[],popular:[],action:[],comedy:[],drama:[],animation:[],horror:[]},he=()=>{const{selectedOtts:e,activeTag:a}=f(),[i,n]=r.useState(b),[s,c]=r.useState({isLoading:!0,error:null}),p=r.useCallback(()=>{n(b)},[]),d=r.useCallback(async()=>{c({isLoading:!0,error:null});try{const g={ottIds:e};if(a&&a!=="all"){const x=await E(g,a);n({...b,popular:x})}else{const[x,v,k,j,_,M,S]=await A(g);n({new:x,popular:v,action:k,comedy:j,drama:_,animation:M,horror:S})}c({isLoading:!1,error:null})}catch(g){console.error("Error fetching movies:",g);const x=g instanceof Error?g.message:"영화 정보를 불러오는데 실패했습니다.";c({isLoading:!1,error:x}),p()}},[e,a,p]);r.useEffect(()=>{d()},[d]);const l=r.useMemo(()=>Object.values(i),[i]),h=r.useMemo(()=>!s.isLoading&&!s.error&&l.every(g=>g.length===0),[s.isLoading,s.error,l]),u=r.useMemo(()=>O(a||"all"),[a]);return t.jsxs(C,{children:[t.jsxs(I,{children:[t.jsx(q,{}),t.jsx(Y,{})]}),t.jsxs(T,{children:[s.isLoading&&t.jsx("div",{className:"loading",children:"영화 로딩 중..."}),s.error&&t.jsx("div",{className:"error",children:s.error}),!s.isLoading&&!s.error&&t.jsxs(t.Fragment,{children:[a!=="all"?t.jsxs(t.Fragment,{children:[i.popular.length>0&&t.jsx(le,{movie:i.popular[0]}),t.jsx(J,{movies:i.popular,title:u}),i.popular.length>5&&t.jsx(y,{movies:i.popular.slice(5,26),title:`${u} 더보기`})]}):t.jsxs(t.Fragment,{children:[i.new.length>0&&t.jsx(m,{movies:i.new,title:"신작"}),i.popular.length>0&&t.jsx(m,{movies:i.popular,title:"인기"}),i.action.length>0&&t.jsx(m,{movies:i.action,title:"액션"}),i.comedy.length>0&&t.jsx(m,{movies:i.comedy,title:"코미디"}),i.drama.length>0&&t.jsx(m,{movies:i.drama,title:"드라마"}),i.animation.length>0&&t.jsx(m,{movies:i.animation,title:"애니메이션"}),i.horror.length>0&&t.jsx(m,{movies:i.horror,title:"공포"})]}),h&&t.jsx("div",{className:"no-results",children:"표시할 영화가 없습니다. 필터를 조정해보세요."})]})]})]})};export{he as default};
