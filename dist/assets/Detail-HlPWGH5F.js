import{r as i,j as e,B as x,D as S,E as v,I as _,J as w,K as b,N as T,O as P,Q as k,U as j,V as C,X as E,Y as B,Z as I,d as M,_ as L}from"./index-C0MwIO6k.js";const D="/assets/triangleRight-Dx0SvmsB.png",O=({movieId:t,movie:s})=>{const[n,r]=i.useState(null),[a,h]=i.useState(!1),[u,l]=i.useState(!0),[d,c]=i.useState(null);i.useEffect(()=>{(async()=>{l(!0),c(null);try{const g=(await _(t,s.media_type)).find(m=>m.type==="Trailer"&&m.site==="YouTube");g?r(g.key):c("예고편을 찾을 수 없습니다.")}catch(f){console.error("Error fetching content videos:",f),c("예고편을 불러오는 데 실패했습니다.")}finally{l(!1)}})()},[t,s.media_type]);const y=()=>{h(!0)};if(u)return e.jsx(x,{children:"예고편 로딩 중..."});if(d)return e.jsx(x,{style:{color:"red"},children:d});const o=s.backdrop_path?`https://image.tmdb.org/t/p/w1280${s.backdrop_path}`:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:"";return e.jsx(x,{children:a?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${n}?autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Movie Trailer"}):e.jsx(S,{src:o,children:n&&e.jsx(v,{onClick:y,children:e.jsx("img",{src:D,alt:"Play Trailer"})})})})},W=({movie:t})=>{const s=t.title||t.name||"제목 없음",n=t.release_date||t.first_air_date||"미정",r=t.media_type==="tv"?"TV 시리즈":"영화";return e.jsxs(w,{children:[e.jsx("h2",{children:s}),e.jsxs("p",{children:[e.jsx("strong",{children:"타입:"})," ",r]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t.media_type==="tv"?"첫 방영일":"개봉일",":"]})," ",n]}),e.jsxs("p",{children:[e.jsx("strong",{children:"평점:"})," ",t.vote_average]}),e.jsxs("p",{children:[e.jsx("strong",{children:"줄거리:"})," ",t.overview]})]})},U=({movieId:t,movieTitle:s,mediaType:n})=>{const[r,a]=i.useState(null),[h,u]=i.useState(!0),[l,d]=i.useState(null);if(i.useEffect(()=>{(async()=>{u(!0),d(null);try{const p=await T(t,n);a(p),console.log("Watch Providers Data:",p)}catch(p){console.error("Error fetching watch providers:",p),d("시청 가능한 OTT 정보를 불러오는 데 실패했습니다.")}finally{u(!1)}})()},[t,n]),h)return e.jsx("p",{children:"시청 가능한 OTT 정보 로딩 중..."});if(l)return e.jsx("p",{style:{color:"red"},children:l});if(!r||!r.link||!r.flatrate&&!r.buy&&!r.rent)return e.jsx("p",{children:"시청 가능한 OTT 정보가 없습니다."});const c=[...r.flatrate||[],...r.buy||[],...r.rent||[]],y=Array.from(new Map(c.map(o=>[o.provider_id,o])).values());return e.jsxs(b,{children:[e.jsx("h2",{children:"시청하기"}),e.jsx("div",{children:y.map(o=>e.jsx($,{providerName:o.provider_name,logoPath:o.logo_path,link:r.link,movieTitle:s},o.provider_id))})]})},$=({providerName:t,logoPath:s,link:n,movieTitle:r})=>{const a=k[t],h=a?`${a}${encodeURIComponent(r)}`:n;return e.jsxs(P,{href:h,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("img",{src:`https://image.tmdb.org/t/p/original${s}`,alt:t}),e.jsx("span",{children:t})]})},N=j.div.withConfig({displayName:"styles__StyledBody",componentId:"sc-1ovi1i0-0"})(["background-color:",";color:",";padding:",";min-height:100vh;box-sizing:border-box;@media (max-width:768px){padding:",";}"],({theme:t})=>t.colors.background,({theme:t})=>t.colors.text,({theme:t})=>t.spacing.lg,({theme:t})=>t.spacing.md),R=j.div.withConfig({displayName:"styles__StyledMovieBoxWrapper",componentId:"sc-1ovi1i0-1"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:",";@media (min-width:768px){flex-direction:row;align-items:flex-start;justify-content:center;gap:",";}"],({theme:t})=>t.spacing.xl,({theme:t})=>t.spacing.lg),V=()=>{const{id:t}=C(),[s]=E(),n=t,r=s.get("type"),[a,h]=i.useState(null),[u,l]=i.useState(!0),[d,c]=i.useState(null);return i.useEffect(()=>{(async()=>{if(!n){c("콘텐츠 ID가 없습니다."),l(!1);return}l(!0),c(null);try{const o=await L(Number(n),r||void 0);h(o)}catch(o){console.error("Error fetching content detail:",o),c("콘텐츠 상세 정보를 불러오는 데 실패했습니다.")}finally{l(!1)}})()},[n,r]),u?e.jsx("p",{children:"영화 상세 정보 로딩 중..."}):d?e.jsx("p",{style:{color:"red"},children:d}):a?e.jsx(e.Fragment,{children:e.jsxs(N,{children:[e.jsxs(R,{children:[e.jsx(B,{children:e.jsx(O,{movieId:Number(n),movie:a})}),e.jsxs(I,{children:[e.jsx(W,{movie:a}),e.jsx(M,{movieId:a.id})]})]}),e.jsx(U,{movieId:Number(n),movieTitle:a.title||a.name||"Unknown",mediaType:a.media_type})]})}):e.jsx("p",{children:"영화 정보를 찾을 수 없습니다."})};export{V as default};
