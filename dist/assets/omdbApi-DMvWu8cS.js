import{d,r as a,j as o}from"./index-C3KzpSDG.js";import"./WatchListButton-CBG7it_o.js";import{M as B}from"./styles-ZYi13QW-.js";const j=d.section.withConfig({displayName:"styles__StyledCarousel",componentId:"sc-1fimurb-0"})(["margin-bottom:",";@media (max-width:","){margin-bottom:",";}"],({theme:t})=>t.spacing.xl,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.spacing.lg),D=d.div.withConfig({displayName:"styles__CarouselHeader",componentId:"sc-1fimurb-1"})(["margin-bottom:",";h3{font-size:28px;font-weight:600;color:",";margin:0;padding:0 12px 0 18px;position:relative;background:linear-gradient( 90deg,rgba(150,150,150,0.1) 5%,rgba(255,255,255,0) 20%,transparent 100% );mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);-webkit-mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);}@media (max-width:","){h3{font-size:24px;padding-left:12px;}}@media (max-width:","){h3{font-size:22px;padding-left:10px;}}"],({theme:t})=>t.spacing.md,({theme:t})=>t.colors.text,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),P=d.div.withConfig({displayName:"styles__CarouselContent",componentId:"sc-1fimurb-2"})(["position:relative;overflow:hidden;padding:10px;width:calc(180px * 7 + 16px * 6 + 20px);margin:0 auto;@media (max-width:","){width:calc(160px * 6 + 16px * 5 + 20px);}@media (max-width:","){width:calc(140px * 5 + 14px * 4 + 20px);padding:8px;}@media (max-width:","){width:100%;max-width:calc(130px * 3 + 10px * 2 + 20px);padding:6px;touch-action:pan-x;-webkit-overflow-scrolling:touch;}"],({theme:t})=>t.breakpoints.desktop,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),A=d.div.withConfig({displayName:"styles__CarouselTrack",componentId:"sc-1fimurb-3"})(["display:flex;gap:16px;transition:transform 0.3s ease-out;.carousel-item{flex:0 0 180px;@media (max-width:","){flex:0 0 160px;}@media (max-width:","){flex:0 0 140px;gap:14px;}@media (max-width:","){flex:0 0 130px;gap:10px;}}@media (max-width:","){gap:10px;}"],({theme:t})=>t.breakpoints.desktop,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile,({theme:t})=>t.breakpoints.mobile),I=d.button.withConfig({displayName:"styles__CarouselButton",componentId:"sc-1fimurb-4"})(["position:absolute;top:60px;bottom:100px;width:50px;background:transparent;border:none;color:",";font-size:60px;cursor:pointer;z-index:10;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;text-shadow:0 0 20px rgba(255,255,255,0.8);pointer-events:auto;touch-action:manipulation;-webkit-tap-highlight-color:transparent;&:hover{color:",";background:rgba(0,0,0,0.4);text-shadow:0 0 30px rgba(255,133,0,1);}&:active{transform:scale(0.9);}&.prev{left:0;background:linear-gradient(90deg,rgba(0,0,0,0.3) 0%,transparent 100%);&:hover{background:linear-gradient(90deg,rgba(0,0,0,0.6) 0%,transparent 100%);}}&.next{right:0;background:linear-gradient(270deg,rgba(0,0,0,0.3) 0%,transparent 100%);&:hover{background:linear-gradient(270deg,rgba(0,0,0,0.6) 0%,transparent 100%);}}@media (max-width:","){font-size:45px;width:45px;}@media (max-width:","){display:none;}"],({theme:t})=>t.colors.text,({theme:t})=>t.colors.primary,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),x={MOBILE:{width:130,visibleItems:3},TABLET:{width:156,visibleItems:5},DESKTOP:{width:196,visibleItems:7}},O=a.memo(({movies:t,title:r})=>{const[n,s]=a.useState(0),[i,h]=a.useState(!1),l=a.useRef(null),E=a.useRef(null);a.useEffect(()=>{const e=()=>{h(window.innerWidth<=430)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{itemWidth:p,visibleItems:m,maxScroll:u}=a.useMemo(()=>{const c=window.innerWidth<=480?x.MOBILE:window.innerWidth<=768?x.TABLET:x.DESKTOP;return{itemWidth:c.width,visibleItems:c.visibleItems,maxScroll:Math.max(0,(t.length-c.visibleItems)*c.width)}},[t.length]),w=a.useCallback(()=>{const e=Math.max(0,n-p*m);s(e),l.current&&(l.current.style.transform=`translateX(-${e}px)`)},[n,p,m]),k=a.useCallback(()=>{const e=Math.min(u,n+p*m);s(e),l.current&&(l.current.style.transform=`translateX(-${e}px)`)},[n,u,p,m]),[y,M]=a.useState(null),[v,C]=a.useState(null),T=e=>{C(null),M(e.targetTouches[0].clientX)},_=e=>{C(e.targetTouches[0].clientX)},S=()=>{if(!y||!v)return;const e=y-v,c=e>50,R=e<-50;c&&n<u&&k(),R&&n>0&&w()};return t.length===0?null:o.jsxs(j,{children:[o.jsx(D,{children:o.jsx("h3",{children:r})}),o.jsxs(P,{ref:E,onTouchStart:i?T:void 0,onTouchMove:i?_:void 0,onTouchEnd:i?S:void 0,children:[!i&&n>0&&o.jsx(I,{className:"prev",onClick:w,children:"‹"}),o.jsx(A,{ref:l,children:t.map(e=>o.jsx("div",{className:"carousel-item",children:o.jsx(B,{movie:e})},e.id))}),!i&&n<u&&o.jsx(I,{className:"next",onClick:k,children:"›"})]})]})});O.displayName="MovieCarousel";const b={};var g={};const f=(b==null?void 0:b.VITE_OMDB_API_KEY)||(typeof process<"u"?g==null?void 0:g.REACT_APP_OMDB_API_KEY:null)||"your_omdb_api_key",L="https://www.omdbapi.com/",$=async t=>{var r,n;try{if(!f||f==="your_omdb_api_key")return null;const s=await fetch(`${L}?i=${t}&apikey=${f}`);if(!s.ok)return null;const i=await s.json();if(i.Response==="False")return null;const h=(n=(r=i.Ratings)==null?void 0:r.find(l=>l.Source==="Rotten Tomatoes"))==null?void 0:n.Value;return{imdbRating:i.imdbRating,rottenTomatoesRating:h||null}}catch{return null}},W=async t=>{try{const n=await fetch(`https://api.themoviedb.org/3/movie/${t}/external_ids?api_key=3ae6b5388fdf89ad467b03611db40b01`);if(!n.ok)throw new Error("TMDB external IDs request failed");return(await n.json()).imdb_id}catch(r){return console.error("Error fetching IMDB ID:",r),null}};export{O as M,$ as a,W as f};
