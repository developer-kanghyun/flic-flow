import{r as i,j as t,B as z,D as Y,E as V,I as P,J as U,K as F,N as O,O as A,Q as K,V as W,U as r,X,Y as J,d as Q,Z,k as q,_ as G,$ as ee,a0 as te,a1 as ae}from"./index-le49yNCJ.js";import{f as ie,a as re}from"./omdbApi-BBekdXAk.js";const se="/assets/triangleRight-Dx0SvmsB.png",oe=({movieId:e,movie:s})=>{const[o,l]=i.useState(null),[a,x]=i.useState(!1),[d,w]=i.useState(!0),[h,b]=i.useState(null);i.useEffect(()=>{(async()=>{w(!0),b(null);try{const f=(await P(e,s.media_type)).find(m=>m.type==="Trailer"&&m.site==="YouTube");f?l(f.key):b("예고편을 찾을 수 없습니다.")}catch(g){console.error("Error fetching content videos:",g),b("예고편을 불러오는 데 실패했습니다.")}finally{w(!1)}})()},[e,s.media_type]);const j=()=>{x(!0)};if(d)return t.jsx(z,{children:"예고편 로딩 중..."});if(h)return t.jsx(z,{style:{color:"red"},children:h});const k=s.backdrop_path?`https://image.tmdb.org/t/p/w1280${s.backdrop_path}`:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:"";return t.jsx(z,{children:a?t.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${o}?autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Movie Trailer"}):t.jsx(Y,{src:k,children:o&&t.jsx(V,{onClick:j,children:t.jsx("img",{src:se,alt:"Play Trailer"})})})})},ne=({isOpen:e,onClose:s,movieId:o,movie:l})=>(i.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),i.useEffect(()=>{const a=x=>{x.key==="Escape"&&s()};return e&&document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[e,s]),e?U.createPortal(t.jsxs(F,{children:[t.jsx(O,{onClick:s}),t.jsxs(A,{children:[t.jsx(K,{onClick:s,children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),t.jsx(W,{children:t.jsx(oe,{movieId:o,movie:l})})]})]}),document.body):null),le=r.div.withConfig({displayName:"styles__StyledDetailPage",componentId:"sc-1ovi1i0-0"})(["min-height:100vh;background-color:",";color:",";"],({theme:e})=>e.colors.background,({theme:e})=>e.colors.text),de=r.section.withConfig({displayName:"styles__HeroSection",componentId:"sc-1ovi1i0-1"})(["position:relative;width:100%;height:70vh;min-height:600px;overflow:hidden;display:flex;align-items:center;justify-content:center;@media (max-width:","){height:60vh;min-height:500px;}@media (max-width:","){height:50vh;min-height:400px;}"],({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.breakpoints.mobile),ce=r.img.withConfig({displayName:"styles__HeroBackdrop",componentId:"sc-1ovi1i0-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;z-index:1;"]),pe=r.div.withConfig({displayName:"styles__HeroOverlay",componentId:"sc-1ovi1i0-3"})(["position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient( 135deg,rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.6) 30%,rgba(0,0,0,0.4) 60%,rgba(0,0,0,0.7) 100% );z-index:2;"]),ge=r.div.withConfig({displayName:"styles__PlayButton",componentId:"sc-1ovi1i0-4"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:4;display:flex;flex-direction:column;align-items:center;gap:",";cursor:pointer;.play-circle{width:88px;height:88px;border:none;background:rgba(255,255,255,0.15);backdrop-filter:blur(20px);border:2px solid rgba(255,255,255,0.3);border-radius:50%;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);&:hover{background:rgba(255,255,255,0.25);border-color:rgba(255,255,255,0.5);transform:scale(1.1);box-shadow:0 20px 40px rgba(0,0,0,0.3);}&:active{transform:scale(0.95);}svg{margin-left:4px;width:28px;height:28px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));}}.play-text{font-size:0.9rem;font-weight:600;color:white;text-shadow:0 2px 8px rgba(0,0,0,0.8);letter-spacing:0.5px;opacity:0.95;text-align:center;}&:hover .play-text{opacity:1;}@media (max-width:","){.play-circle{width:76px;height:76px;svg{width:24px;height:24px;}}.play-text{font-size:0.85rem;}}@media (max-width:","){.play-circle{width:68px;height:68px;svg{width:20px;height:20px;}}.play-text{font-size:0.8rem;}}"],({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.breakpoints.mobile),me=r.div.withConfig({displayName:"styles__HeroContent",componentId:"sc-1ovi1i0-5"})(["position:relative;z-index:3;max-width:1200px;width:100%;padding:0 ",";display:flex;align-items:flex-end;height:100%;padding-bottom:",";.hero-text{max-width:50%;h1{font-size:3.8rem;font-weight:800;background:linear-gradient(to right,#fff9eb 0%,#fcda54 90%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;color:transparent;margin-bottom:",";line-height:1.1;letter-spacing:-0.02em;filter:drop-shadow(0 3px 8px rgba(254,203,55,0.5));@media (max-width:","){font-size:3.2rem;}@media (max-width:","){font-size:2.8rem;margin-bottom:",";}@media (max-width:","){font-size:2.2rem;}}.hero-meta{display:flex;align-items:center;gap:8px;margin-bottom:",";.watchlist-wrapper{display:flex;align-items:center;}.imdb-rating{display:flex;align-items:center;gap:6px;background:linear-gradient( 135deg,rgba(255,133,0,0.15) 0%,rgba(255,183,0,0.1) 50%,rgba(255,133,0,0.05) 100% );backdrop-filter:blur(10px);border:1px solid rgba(255,133,0,0.3);border-radius:8px;padding:6px 10px;box-shadow:0 4px 12px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.1);.imdb-label{font-size:0.65rem;font-weight:700;color:#f5c518;text-transform:uppercase;letter-spacing:0.5px;text-shadow:0 1px 2px rgba(0,0,0,0.8);}.rating-score{font-size:0.9rem;font-weight:700;color:#ffffff;text-shadow:0 1px 3px rgba(0,0,0,0.9);}}.rotten-tomatoes{display:flex;align-items:center;gap:6px;background:linear-gradient( 135deg,rgba(255,60,60,0.15) 0%,rgba(255,80,80,0.1) 50%,rgba(255,60,60,0.05) 100% );backdrop-filter:blur(10px);border:1px solid rgba(255,60,60,0.3);border-radius:8px;padding:6px 10px;box-shadow:0 4px 12px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.1);.rt-label{font-size:0.8rem;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.8));}.rt-score{font-size:0.9rem;font-weight:700;color:#ffffff;text-shadow:0 1px 3px rgba(0,0,0,0.9);}}.release-year{font-size:1.1rem;font-weight:600;color:rgba(255,255,255,0.8);text-shadow:0 1px 3px rgba(0,0,0,0.7);}.director{font-size:1.1rem;font-weight:600;color:rgba(255,255,255,0.8);text-shadow:0 1px 3px rgba(0,0,0,0.7);}@media (max-width:","){gap:6px;margin-bottom:",";flex-wrap:wrap;.release-year,.director{font-size:1rem;}.imdb-rating,.rotten-tomatoes{padding:4px 8px;gap:4px;.imdb-label{font-size:0.6rem;}.rating-score,.rt-score{font-size:0.8rem;}.rt-label{font-size:0.7rem;}}}}.overview{font-size:1.1rem;line-height:1.6;margin-bottom:",";text-shadow:1px 1px 2px rgba(0,0,0,0.8);max-width:100%;@media (max-width:","){font-size:1rem;}}.hero-actions{display:flex;gap:",";.ott-link-button{display:flex;align-items:center;padding:",';background:linear-gradient(135deg,#ffffff 0%,#f8f8f8 50%,#e8e8e8 100%);color:#1a1a1a;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:all 0.3s ease;position:relative;overflow:hidden;text-decoration:none;box-shadow:0 4px 12px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.8);&::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient( 90deg,transparent,rgba(255,255,255,0.4),transparent );transition:left 0.5s ease;}&:hover{background:linear-gradient(135deg,#f0f0f0 0%,#e8e8e8 50%,#d8d8d8 100%);transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.9);&::before{left:100%;}}&:active{transform:translateY(-1px) scale(1.01);}@media (max-width:',"){padding:",";font-size:0.9rem;}}}@media (max-width:","){max-width:100%;text-align:center;}}@media (max-width:","){padding:0 ",";align-items:center;justify-content:center;}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.sm,({theme:e})=>e.breakpoints.desktop,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.xs,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.md,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.sm,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.md,({theme:e})=>`${e.spacing.sm} ${e.spacing.lg}`,({theme:e})=>e.breakpoints.mobile,({theme:e})=>`${e.spacing.xs} ${e.spacing.md}`,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.lg),xe=r.div.withConfig({displayName:"styles__ContentContainer",componentId:"sc-1ovi1i0-6"})(["max-width:1200px;margin:0 auto;padding:",";display:grid;grid-template-columns:2fr 1fr;gap:",";@media (max-width:","){grid-template-columns:1fr;padding:",";}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.lg),he=r.div.withConfig({displayName:"styles__MainContent",componentId:"sc-1ovi1i0-7"})(["display:flex;flex-direction:column;gap:",";"],({theme:e})=>e.spacing.lg),be=r.div.withConfig({displayName:"styles__Sidebar",componentId:"sc-1ovi1i0-8"})(["display:flex;flex-direction:column;gap:",";"],({theme:e})=>e.spacing.lg),fe=r.div.withConfig({displayName:"styles__MetadataCard",componentId:"sc-1ovi1i0-9"})(["background:linear-gradient(135deg,rgba(255,255,255,0.08) 0%,rgba(255,255,255,0.03) 100%);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.15);border-radius:20px;padding:",";position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,rgba(255,215,0,0.8),rgba(255,165,0,0.6));border-radius:20px 20px 0 0;}h3{font-size:1.3rem;font-weight:700;margin:0 0 ",";color:",";text-transform:uppercase;letter-spacing:1px;position:relative;}.metadata-grid{display:grid;gap:",";}.metadata-item{display:flex;justify-content:space-between;align-items:center;padding:",";background:rgba(255,255,255,0.03);border-radius:12px;border:1px solid rgba(255,255,255,0.08);transition:all 0.3s ease;&:hover{background:rgba(255,255,255,0.06);transform:translateX(5px);border-color:rgba(255,215,0,0.3);}.label{font-weight:600;color:rgba(255,255,255,0.9);font-size:0.95rem;text-transform:uppercase;letter-spacing:0.5px;}.value{font-weight:600;color:",";font-size:1rem;text-align:right;}}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.lg,({theme:e})=>e.colors.text,({theme:e})=>e.spacing.lg,({theme:e})=>e.spacing.md,({theme:e})=>e.colors.text),ue=r.div.withConfig({displayName:"styles__CastCard",componentId:"sc-1ovi1i0-10"})(["background:linear-gradient(135deg,rgba(255,255,255,0.08) 0%,rgba(255,255,255,0.03) 100%);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.15);border-radius:20px;padding:",";position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,rgba(0,191,255,0.8),rgba(138,43,226,0.6));border-radius:20px 20px 0 0;}h3{font-size:1.3rem;font-weight:700;margin:0 0 ",";color:",";text-transform:uppercase;letter-spacing:1px;position:relative;}.cast-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:",";@media (max-width:","){grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:",";}}.cast-item{display:flex;gap:",";padding:",";border-radius:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.08),transparent);transition:left 0.5s ease;}&:hover{background:rgba(255,255,255,0.1);transform:translateY(-3px) scale(1.02);border-color:rgba(0,191,255,0.4);box-shadow:0 8px 25px rgba(0,0,0,0.3);&::before{left:100%;}.cast-photo{transform:scale(1.05);}}.cast-photo{width:60px;height:90px;object-fit:cover;border-radius:12px;flex-shrink:0;transition:transform 0.3s ease;box-shadow:0 4px 12px rgba(0,0,0,0.3);border:2px solid rgba(255,255,255,0.1);}.cast-info{display:flex;flex-direction:column;justify-content:center;gap:",";z-index:1;position:relative;.cast-name{font-weight:700;font-size:1rem;color:",";line-height:1.3;}.cast-character{font-size:0.85rem;color:rgba(255,255,255,0.8);font-weight:500;font-style:italic;}}}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.lg,({theme:e})=>e.colors.text,({theme:e})=>e.spacing.lg,({theme:e})=>e.breakpoints.mobile,({theme:e})=>e.spacing.md,({theme:e})=>e.spacing.md,({theme:e})=>e.spacing.md,({theme:e})=>e.spacing.sm,({theme:e})=>e.colors.text),we=r.section.withConfig({displayName:"styles__RecommendationsSection",componentId:"sc-1ovi1i0-11"})(["max-width:1200px;margin:0 auto;padding:",";display:flex;justify-content:center;> div{max-width:800px;width:100%;}@media (max-width:","){padding:",";}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.breakpoints.tablet,({theme:e})=>e.spacing.lg);r.div.withConfig({displayName:"styles__StyledBody",componentId:"sc-1ovi1i0-12"})(["background-color:",";color:",";padding:",";min-height:100vh;box-sizing:border-box;@media (max-width:768px){padding:",";}"],({theme:e})=>e.colors.background,({theme:e})=>e.colors.text,({theme:e})=>e.spacing.lg,({theme:e})=>e.spacing.md);r.div.withConfig({displayName:"styles__StyledMovieBoxWrapper",componentId:"sc-1ovi1i0-13"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:",";@media (min-width:768px){flex-direction:row;align-items:flex-start;justify-content:center;gap:",";}"],({theme:e})=>e.spacing.xl,({theme:e})=>e.spacing.lg);const je=()=>{var T;const{id:e}=X(),[s]=J(),o=e,l=s.get("type"),[a,x]=i.useState(null),[d,w]=i.useState(null),[h,b]=i.useState([]),[j,k]=i.useState(!1),[S,g]=i.useState(!0),[f,m]=i.useState(null),[B,I]=i.useState(!1),[D,E]=i.useState({imdbRating:null,rottenTomatoesRating:null}),[u,$]=i.useState(null);if(i.useEffect(()=>{(async()=>{if(!o){m("콘텐츠 ID가 없습니다."),g(!1);return}g(!0),m(null);try{const[c,y,_,N,H]=await Promise.all([G(Number(o),l||void 0),ee(Number(o),l||void 0),te(Number(o),l||void 0),P(Number(o),l||void 0),ae(Number(o),l||void 0)]);x(c),w(y),b(_),$(H);const L=N.find(p=>p.type==="Trailer"&&p.site==="YouTube");k(!!L);try{const p=await ie(c.id);if(p){const C=await re(p);C&&E({imdbRating:C.imdbRating,rottenTomatoesRating:C.rottenTomatoesRating})}}catch(p){console.error("Error fetching ratings:",p)}}catch(c){console.error("Error fetching content data:",c),m("콘텐츠 상세 정보를 불러오는 데 실패했습니다.")}finally{g(!1)}})()},[o,l]),S)return t.jsx("p",{children:"영화 상세 정보 로딩 중..."});if(f)return t.jsx("p",{style:{color:"red"},children:f});if(!a)return t.jsx("p",{children:"영화 정보를 찾을 수 없습니다."});const M=a.backdrop_path?`https://image.tmdb.org/t/p/w1280${a.backdrop_path}`:null,v=d==null?void 0:d.crew.find(n=>n.job==="Director"),R=(d==null?void 0:d.cast.slice(0,6))||[];return t.jsxs(le,{children:[t.jsxs(de,{children:[M&&t.jsx(ce,{src:M,alt:a.title||a.name}),t.jsx(pe,{}),j&&t.jsxs(ge,{onClick:()=>I(!0),children:[t.jsx("button",{className:"play-circle",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("span",{className:"play-text",children:"예고편 보기"})]}),t.jsx(me,{children:t.jsxs("div",{className:"hero-text",children:[t.jsx("h1",{children:a.title||a.name}),t.jsxs("div",{className:"hero-meta",children:[t.jsx("div",{className:"watchlist-wrapper",children:t.jsx(Q,{movieId:a.id})}),t.jsxs("div",{className:"imdb-rating",children:[t.jsx("span",{className:"imdb-label",children:"IMDB"}),t.jsx("span",{className:"rating-score",children:D.imdbRating||((T=a.vote_average)==null?void 0:T.toFixed(1))||"8.2"})]}),t.jsxs("div",{className:"rotten-tomatoes",children:[t.jsx("span",{className:"rt-label",children:"🍅"}),t.jsx("span",{className:"rt-score",children:D.rottenTomatoesRating||`${Math.round((a.vote_average||8.2)*8.5)}%`})]}),t.jsx("span",{className:"release-year",children:a.release_date?new Date(a.release_date).getFullYear():a.first_air_date?new Date(a.first_air_date).getFullYear():"2024"}),v&&t.jsxs("span",{className:"director",children:["감독: ",v.name]})]}),t.jsx("p",{className:"overview",children:a.overview}),t.jsx("div",{className:"hero-actions",children:u&&u.flatrate&&u.flatrate.length>0&&(()=>{const n=u.flatrate.filter(N=>!N.provider_name.includes("Standard with Ads"));if(n.length===0)return null;const c=n[0],y=Z[c.provider_name],_=y?`${y}${encodeURIComponent(a.title||a.name||"")}`:u.link;return t.jsxs("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"ott-link-button",children:[c.provider_name,"에서 시청"]})})()})]})})]}),t.jsxs(xe,{children:[t.jsxs(he,{children:[t.jsxs(fe,{children:[t.jsx("h3",{children:"상세 정보"}),t.jsxs("div",{className:"metadata-grid",children:[t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"label",children:"출시일"}),t.jsx("span",{className:"value",children:new Date(a.release_date||a.first_air_date||"").toLocaleDateString("ko-KR")})]}),a.vote_average&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"label",children:"평점"}),t.jsxs("span",{className:"value",children:["★ ",a.vote_average.toFixed(1),"/10"]})]}),v&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"label",children:"감독"}),t.jsx("span",{className:"value",children:v.name})]})]})]}),R.length>0&&t.jsxs(ue,{children:[t.jsx("h3",{children:"주요 출연진"}),t.jsx("div",{className:"cast-grid",children:R.map(n=>t.jsxs("div",{className:"cast-item",children:[n.profile_path&&t.jsx("img",{src:`https://image.tmdb.org/t/p/w185${n.profile_path}`,alt:n.name,className:"cast-photo"}),t.jsxs("div",{className:"cast-info",children:[t.jsx("span",{className:"cast-name",children:n.name}),t.jsx("span",{className:"cast-character",children:n.character})]})]},n.id))})]})]}),t.jsx(be,{})]}),h.length>0&&t.jsx(we,{children:t.jsx(q,{movies:h.slice(0,7),title:"비슷한 콘텐츠"})}),t.jsx(ne,{isOpen:B,onClose:()=>I(!1),movieId:Number(o),movie:a})]})};export{je as default};
