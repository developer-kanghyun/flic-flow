import{d,r as i,j as o}from"./index-z272hRaU.js";import"./WatchListButton-B9fK-QYz.js";import{M as S}from"./styles-o42f_gmB.js";const R=d.section.withConfig({displayName:"styles__StyledCarousel",componentId:"sc-1fimurb-0"})(["margin-bottom:",";@media (max-width:","){margin-bottom:",";}"],({theme:t})=>t.spacing.xl,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.spacing.lg),B=d.div.withConfig({displayName:"styles__CarouselHeader",componentId:"sc-1fimurb-1"})(["margin-bottom:",";h3{font-size:28px;font-weight:600;color:",";margin:0;padding:0 12px 0 18px;position:relative;background:linear-gradient( 90deg,rgba(150,150,150,0.1) 5%,rgba(255,255,255,0) 20%,transparent 100% );mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);-webkit-mask:linear-gradient(90deg,black 0%,black 70%,transparent 100%);}@media (max-width:","){h3{font-size:24px;padding-left:12px;}}@media (max-width:","){h3{font-size:22px;padding-left:10px;}}"],({theme:t})=>t.spacing.md,({theme:t})=>t.colors.text,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),j=d.div.withConfig({displayName:"styles__CarouselContent",componentId:"sc-1fimurb-2"})(["position:relative;overflow:hidden;padding:10px;width:calc(180px * 7 + 16px * 6 + 20px);margin:0 auto;@media (max-width:","){width:calc(160px * 6 + 16px * 5 + 20px);}@media (max-width:","){width:calc(140px * 5 + 14px * 4 + 20px);padding:8px;}@media (max-width:","){width:100%;max-width:calc(130px * 3 + 10px * 2 + 20px);padding:6px;touch-action:pan-x;-webkit-overflow-scrolling:touch;}"],({theme:t})=>t.breakpoints.desktop,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),D=d.div.withConfig({displayName:"styles__CarouselTrack",componentId:"sc-1fimurb-3"})(["display:flex;gap:16px;transition:transform 0.3s cubic-bezier(0.25,0.46,0.45,0.94);will-change:transform;.carousel-item{flex:0 0 180px;@media (max-width:","){flex:0 0 160px;}@media (max-width:","){flex:0 0 140px;gap:14px;}@media (max-width:","){flex:0 0 130px;gap:10px;}}@media (max-width:","){gap:10px;}"],({theme:t})=>t.breakpoints.desktop,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile,({theme:t})=>t.breakpoints.mobile),y=d.button.withConfig({displayName:"styles__CarouselButton",componentId:"sc-1fimurb-4"})(["position:absolute;top:60px;bottom:100px;width:50px;background:transparent;border:none;color:",";font-size:60px;cursor:pointer;z-index:10;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;text-shadow:0 0 20px rgba(255,255,255,0.8);pointer-events:auto;touch-action:manipulation;-webkit-tap-highlight-color:transparent;&:hover{color:",";background:rgba(0,0,0,0.4);text-shadow:0 0 30px rgba(255,133,0,1);}&:active{transform:scale(0.9);}&.prev{left:0;background:linear-gradient(90deg,rgba(0,0,0,0.3) 0%,transparent 100%);&:hover{background:linear-gradient(90deg,rgba(0,0,0,0.6) 0%,transparent 100%);}}&.next{right:0;background:linear-gradient(270deg,rgba(0,0,0,0.3) 0%,transparent 100%);&:hover{background:linear-gradient(270deg,rgba(0,0,0,0.6) 0%,transparent 100%);}}@media (max-width:","){font-size:45px;width:45px;}@media (max-width:","){display:none;}"],({theme:t})=>t.colors.text,({theme:t})=>t.colors.primary,({theme:t})=>t.breakpoints.tablet,({theme:t})=>t.breakpoints.mobile),x={MOBILE:{width:130,visibleItems:3},TABLET:{width:156,visibleItems:5},DESKTOP:{width:196,visibleItems:7}},L=i.memo(({movies:t,title:r})=>{const[n,s]=i.useState(0),[a,h]=i.useState(!1),l=i.useRef(null),C=i.useRef(null);i.useEffect(()=>{const e=()=>{h(window.innerWidth<=430)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{itemWidth:p,visibleItems:m,maxScroll:u}=i.useMemo(()=>{const c=window.innerWidth<=480?x.MOBILE:window.innerWidth<=768?x.TABLET:x.DESKTOP;return{itemWidth:c.width,visibleItems:c.visibleItems,maxScroll:Math.max(0,(t.length-c.visibleItems)*c.width)}},[t.length]),g=i.useCallback(()=>{const e=Math.max(0,n-p*m);s(e),l.current&&(l.current.style.transform=`translateX(-${e}px)`)},[n,p,m]),f=i.useCallback(()=>{const e=Math.min(u,n+p*m);s(e),l.current&&(l.current.style.transform=`translateX(-${e}px)`)},[n,u,p,m]),[w,_]=i.useState(null),[k,v]=i.useState(null),I=e=>{v(null),_(e.targetTouches[0].clientX)},M=e=>{v(e.targetTouches[0].clientX)},T=()=>{if(!w||!k)return;const e=w-k,c=e>50,E=e<-50;c&&n<u&&f(),E&&n>0&&g()};return t.length===0?null:o.jsxs(R,{children:[o.jsx(B,{children:o.jsx("h3",{children:r})}),o.jsxs(j,{ref:C,onTouchStart:a?I:void 0,onTouchMove:a?M:void 0,onTouchEnd:a?T:void 0,children:[!a&&n>0&&o.jsx(y,{className:"prev",onClick:g,children:"‹"}),o.jsx(D,{ref:l,children:t.map(e=>o.jsx("div",{className:"carousel-item",children:o.jsx(S,{movie:e})},e.id))}),!a&&n<u&&o.jsx(y,{className:"next",onClick:f,children:"›"})]})]})});L.displayName="MovieCarousel";const b="34818fb5",N="https://www.omdbapi.com/",A=async t=>{var r,n;try{const s=await fetch(`${N}?i=${t}&apikey=${b}`);if(!s.ok)return null;const a=await s.json();if(a.Response==="False")return null;const h=(n=(r=a.Ratings)==null?void 0:r.find(l=>l.Source==="Rotten Tomatoes"))==null?void 0:n.Value;return{imdbRating:a.imdbRating,rottenTomatoesRating:h||null}}catch{return null}},$=async t=>{try{const n=await fetch(`https://api.themoviedb.org/3/movie/${t}/external_ids?api_key=3ae6b5388fdf89ad467b03611db40b01`);if(!n.ok)throw new Error("TMDB external IDs request failed");return(await n.json()).imdb_id}catch(r){return console.error("Error fetching IMDB ID:",r),null}};export{L as M,A as a,$ as f};
